<%= partial :categories, :locals => {:category => @item.category, :inventory_slot => {:id => @item.inventory_slot, :name => @item.inventory_slot_name}} %>

<dl class="recipe" rel="<%= @item.id %>">
  <dt>
    <%= tag :img, :src => @item.icon.url, :class => "icon" %>
    <%= @item.to_wowhead %>
    <%= @item.to_link %>
    
    <% tag :strong, :class => "rrp", :'data-price' => @item.auction_price(:realm => @realm, :faction => @faction).to_i do %>
      <%= @item.recipe.price(:realm => @realm, :faction => @faction).to_html %>
    <% end %>
  </dt>
  <%
  unless @item.recipe.nil? 
    @item.recipe.reagents.each do |reagent| %>
  <dd><var class="quantity"><%= reagent.quantity %></var> 
  <%= link_to reagent.component.name, "/item/#{reagent.component.id}", 
        :class => reagent.component.quality.downcase, 
        :'data-item-price' => reagent.component.auction_price(:realm => @realm, :faction => @faction).to_s,
        :'data-item-id' => reagent.component.id %></dd>
  <% end 
  end %>
</dl>